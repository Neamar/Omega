<?php 
$Datas = array();
		
foreach($this->RawDatas as $Hash => $ExerciceDatas)
{
	$Expiration = '<a href="/correcteur/exercice/reservation/' . $Hash . '">Je prends !</a><br />';
	$Expiration .= $this->Date_countdown($ExerciceDatas['TimeoutEleve']);
	
	$Infos = '<p>Exercice «&nbsp;<strong>' . $ExerciceDatas['Titre'] . '</strong>&nbsp;»';
	$Infos .= ', <strong>' . $ExerciceDatas['Matiere'] . '</strong>';
	if($ExerciceDatas['Section'] != '')
	{
		$Infos .= ' (' . $ExerciceDatas['Section'] . ')';
	}
	$Infos .= ', ' . $ExerciceDatas['DetailsClasse'];
	
	$Infos .= '<br />Demande : ' . $ExerciceDatas['DetailsDemande'];
	
	//Créer un objet Exercice pour afficher la remarque de l'élève (le VH prend un exercice en paramètre, et pas un tableau)
	//MOCHE
	//TODO : gérer les mathématiques présentes dans la remarque (via MathJax.Hub.Queue(["Typeset", MathJax.Hub);)
	$Cast = new Exercice();
	$Cast->InfosEleve = $ExerciceDatas['InfosEleve'];
	$Infos .= $this->Exercice_infos($Cast, 'Eleve');
	unset($Cast);
	
	$Infos .= '</p><p class="image-preview">';
	if(!is_null($ExerciceDatas['Sujets']))
	{
		$ExerciceDatas['Sujets'] = explode(',', $ExerciceDatas['Sujets']);
		$ExerciceDatas['Sujets'] = array_flip($ExerciceDatas['Sujets']);
		$Infos .= $this->Exercice_thumbs($ExerciceDatas['Sujets'], $ExerciceDatas['LongHash']);
	}
	
	$Infos .= '</p>';
	
	$Datas[] = array(
		$Expiration,
		$Infos
	);
}

echo json_encode($Datas);
?>